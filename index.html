<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Web Radio Player</title>
    <style>
        body {
            font-family: 'Roboto', sans-serif;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background: linear-gradient(165deg, #002fff 0%, #5a54ff 100%);
        }
        .player {
            width: 100%;
            max-width: 400px;
            background-color: rgba(255, 255, 255, 0.1);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
            overflow: hidden;
        }
        .player-header {
            padding: 20px;
            text-align: center;
            background-color: rgba(255, 255, 255, 0.1);
        }
        .player-title {
            font-size: 24px;
            font-weight: bold;
            margin: 0;
            color: #ffffff;
        }
        .social-icons {
            display: flex;
            gap: 10px;
            justify-content: center;
            padding: 10px;
            background-color: rgba(255, 255, 255, 0.05);
        }
        .social-icons a {
            transition: transform 0.3s ease;
        }
        .social-icons a:hover {
            transform: scale(1.1);
        }
        .player-content {
            padding: 20px;
        }
        .info-bar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            color: #ffffff;
        }
        .datetime {
            text-align: left;
        }
        .weather {
            text-align: right;
            cursor: pointer;
        }
        .controls {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            margin-bottom: 20px;
        }
        .btn {
            background-color: rgba(255, 255, 255, 0.2);
            border: none;
            color: white;
            padding: 15px;
            border-radius: 50%;
            cursor: pointer;
            font-size: 24px;
            width: 60px;
            height: 60px;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s ease;
        }
        .btn:hover {
            background-color: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }
        .volume-control {
            display: flex;
            align-items: center;
            gap: 10px;
            margin-top: 20px;
        }
        .volume-slider {
            flex-grow: 1;
            -webkit-appearance: none;
            width: 100%;
            height: 5px;
            border-radius: 5px;
            background: rgba(255, 255, 255, 0.3);
            outline: none;
        }
        .volume-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 15px;
            height: 15px;
            border-radius: 50%;
            background: #ffffff;
            cursor: pointer;
        }
        .current-program {
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            color: #ffffff;
            margin-top: 20px;
        }
        .current-program h3 {
            margin: 0 0 10px 0;
            font-size: 18px;
        }
        .current-program p {
            margin: 5px 0;
            font-size: 14px;
        }
        .weather-icon {
            font-size: 36px;
        }
        .temperature {
            font-size: 24px;
            font-weight: bold;
        }
        .weather-description {
            font-size: 14px;
        }
        .carousel {
            margin-top: 20px;
            position: relative;
            overflow: c;
            border-radius: 15px;
        }
        .carousel-inner {
            display: flex;
            transition: transform 1.5s ease;
        }
        .carousel-item {
            flex: 0 0 100%;
            
            background-color: rgba(255, 255, 255, 0.1);
            color: #ffffff;
            text-align: center;
        }
        .carousel-control {
            position: absolute;
            top: 50%;
            transform: translateY(-25%);
            background-color: rgba(255, 255, 255, 0.3);
            color: #ffffff;
            border: none;
            padding: 10px;
            cursor: pointer;
            font-size: 18px;
            border-radius: 50%;
        }
        .carousel-control.prev {
            left: 10px;
        }
        .carousel-control.next {
            right: 10px;
        }
        .schedule-btn {
            display: block;
            margin: 20px auto 0;
            padding: 10px 20px;
            background-color: rgba(255, 255, 255, 0.2);
            color: #ffffff;
            border: none;
            border-radius: 20px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s ease;
        }
        .schedule-btn:hover {
            background-color: rgba(255, 255, 255, 0.3);
        }
        .popup {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .popup-content {
            background-color: #ffffff;
            padding: 20px;
            border-radius: 10px;
            max-width: 80%;
            max-height: 80%;
            overflow-y: auto;
            position: relative;
        }
        .close-btn {
            position: absolute;
            top: 10px;
            right: 10px;
            font-size: 24px;
            cursor: pointer;
            background: none;
            border: none;
            color: #333;
        }
        .schedule-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 20px;
        }
        .schedule-table th, .schedule-table td {
            border: 1px solid #ddd;
            padding: 8px;
            text-align: left;
        }
        .schedule-table th {
            background-color: #f2f2f2;
        }
        #weather-popup {
            text-align: center;
        }
        #weather-popup .weather-icon {
            font-size: 72px;
            margin-bottom: 10px;
        }
        #weather-popup .temperature {
            font-size: 36px;
            font-weight: bold;
            margin-bottom: 10px;
        }
        #weather-popup .weather-description {
            font-size: 18px;
        }
        .weekly-forecast {
            display: flex;
            justify-content: space-between;
            margin-top: 20px;
        }
        .forecast-day {
            text-align: center;
            padding: 10px;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
        }
        .forecast-day .weather-icon {
            font-size: 36px;
        }
        .forecast-day .temperature {
            font-size: 18px;
        }
        .forecast-day .day {
            font-weight: bold;
            margin-bottom: 5px;
        }
    </style>
</head>
<body>
    <div class="player">
        <div class="player-header">
            <h1 class="player-title">Radio Positiva FM</h1>
        </div>
        <div class="social-icons">
            <a href="https://api.whatsapp.com/send/?phone=5524999936696&text&app_absent=0" target="_blank" title="WhatsApp">
                <img src="https://cdn-icons-png.flaticon.com/128/13051/13051741.png" alt="WhatsApp" style="width: 40px; height: 40px;">
            </a>
            <a href="https://www.instagram.com/positivafm95/" target="_blank" title="Instagram">
                <img src="https://cdn-icons-png.flaticon.com/128/3955/3955024.png" alt="Instagram" style="width: 40px; height: 40px;">
            </a>
            <a href="https://www.facebook.com/positivafm95/" target="_blank" title="Facebook">
                <img src="https://cdn-icons-png.flaticon.com/128/733/733547.png" alt="Facebook" style="width: 40px; height: 40px;">
            </a>
            <a href="https://x.com/radiopositivafm/" target="_blank" title="Twitter">
                <img src="https://cdn-icons-png.flaticon.com/128/5969/5969020.png" alt="Twitter" style="width: 40px; height: 40px;">
            </a>
            <a href="https://www.youtube.com/@topangra" target="_blank" title="YouTube">
                <img src="https://cdn-icons-png.flaticon.com/128/3670/3670147.png" alt="YouTube" style="width: 40px; height: 40px;">
            </a>
            <a href="https://radiopositivafm.com.br/" target="_blank" title="Website">
                <img src="https://www.radiopositivafm.com.br/storage/img/layouts/1708724399_29787425.png" alt="Website" style="width: 40px; height: 40px;">
            </a>
        </div>
        <div class="player-content">
            <div class="info-bar">
                <div class="datetime">
                    <div id="date"></div>
                    <div id="time"></div>
                </div>
                <div class="weather" id="weather-widget">
                    <div id="weather-icon" class="weather-icon"></div>
                    <div id="temperature" class="temperature"></div>
                    <div id="weather-description" class="weather-description"></div>
                </div>
            </div>

            <audio id="audio-player" src="https://stm37.srvstm.com:6888/stream"></audio>

            <div class="controls">
                <button id="play-pause" class="btn" aria-label="Reproduzir ou pausar">▶</button>
                <button id="mute" class="btn" aria-label="Mutar ou desmutar">🔊</button>
            </div>

            <div class="volume-control">
                <input type="range" id="volume" class="volume-slider" min="0" max="1" step="0.01" value="1" aria-label="Controle de volume">
            </div>
            <div id="current-program" class="current-program"></div>

            <div class="carousel">
                <div class="carousel-inner">
                    <div class="carousel-item">
                        <a href="https://exemplo.com" target="_blank" title="Clique para saber mais">
                            <img src="casa.png" alt="Imagem de Notícias" style="width: 100%; border-radius: 10px;">
                    </div>
                    <div class="carousel-item">
                        <a href="https://exemplo.com" target="_blank" title="Clique para saber mais">
                            <img src="pantanal.jpg" alt="Imagem de Notícias" style="width: 100%; border-radius: 10px;">

                    </div>
                    <div class="carousel-item">
                        <a href="https://exemplo.com" target="_blank" title="Clique para saber mais">
                            <img src="rjnet.jpeg" alt="Imagem de Notícias" style="width: 100%; border-radius: 10px;">

                    </div><div class="carousel-item">
                        <a href="https://exemplo.com" target="_blank" title="Clique para saber mais">
                            <img src="tuca.jpeg" alt="Imagem de Notícias" style="width: 100%; border-radius: 10px;">

                    </div><div class="carousel-item">
                        <a href="https://exemplo.com" target="_blank" title="Clique para saber mais">
                            <img src="nalin.png" alt="Imagem de Notícias" style="width: 100%; border-radius: 10px;">

                    </div><div class="carousel-item">
                        <a href="https://exemplo.com" target="_blank" title="Clique para saber mais">
                            <img src="val.jpg" alt="Imagem de Notícias" style="width: 100%; border-radius: 10px;">
                        </a>

                    </div>
                </div>
                <button class="carousel-control prev" aria-label="Item anterior">❮</button>
                <button class="carousel-control next" aria-label="Próximo item">❯</button>
            </div>

            <button id="schedule-btn" class="schedule-btn">Ver Programação Completa</button>
        </div>
    </div>

    <div id="schedule-popup" class="popup">
        <div class="popup-content">
            <button class="close-btn" aria-label="Fechar">&times;</button>
            <h2>Programação Completa</h2>
            <div id="schedule-content"></div>
        </div>
    </div>

    <div id="weather-popup" class="popup">
        <div class="popup-content">
            <button class="close-btn" aria-label="Fechar">&times;</button>
            <h2>Previsão do Tempo para a Semana</h2>
            <div id="weather-popup-content"></div>
        </div>


    </div>

    <script>
        const audioPlayer = document.getElementById('audio-player');
        const playPauseButton = document.getElementById('play-pause');
        const muteButton = document.getElementById('mute');
        const volumeControl = document.getElementById('volume');
        const dateElement = document.getElementById('date');
        const timeElement = document.getElementById('time');
        const weatherIcon = document.getElementById('weather-icon');
        const temperatureElement = document.getElementById('temperature');
        const descriptionElement = document.getElementById('weather-description');
        const currentProgramElement = document.getElementById('current-program');
        const scheduleButton = document.getElementById('schedule-btn');
        const schedulePopup = document.getElementById('schedule-popup');
        const weatherPopup = document.getElementById('weather-popup');
        const weatherWidget = document.getElementById('weather-widget');
        const closeButtons = document.querySelectorAll('.close-btn');
        const scheduleContent = document.getElementById('schedule-content');
        const weatherPopupContent = document.getElementById('weather-popup-content');

        const API_KEY = '58bfbeab6ca01093782e36d6755ef402';
        const CITY_ID = '3471374'; // Angra dos Reis city ID

        const schedule = {
            "Segunda": [
                {"programa": "MANHÃ POSITIVA", "apresentador": "Viny Gomes", "start_time": "06:00", "end_time": "08:00"},
                {"programa": "ANGRA NA ONDA", "apresentador": "Marcus Megga", "start_time": "08:00", "end_time": "10:00"},
                {"programa": "PAINEL DE CONTROLE", "apresentador": "Cristiano Ferreira", "start_time": "10:00", "end_time": "12:00"},
                {"programa": "SELEÇÃO BRASIL", "apresentador": "Cristiano Ferreira", "start_time": "12:00", "end_time": "13:00"},
                {"programa": "RADIO CONTROLE", "apresentador": "Gilson Silva", "start_time": "13:00", "end_time": "15:00"},
                {"programa": "PROGRAMA DU FARIA", "apresentador": "Flávio Faria", "start_time": "15:00", "end_time": "18:00"},
                {"programa": "PARADÃO SERTANEJO", "apresentador": "Viny Gomes", "start_time": "18:00", "end_time": "20:00"},
                {"programa": "SACOLEJO", "apresentador": "Zareta Jr", "start_time": "20:00", "end_time": "22:00"},
                {"programa": "ESTAÇÃO DEZ", "apresentador": "Zareta Jr", "start_time": "22:00", "end_time": "00:00"}
            ],
            "Terça": [
                {"programa": "MANHÃ POSITIVA", "apresentador": "Viny Gomes", "start_time": "06:00", "end_time": "08:00"},
                {"programa": "ANGRA NA ONDA", "apresentador": "Marcus Megga", "start_time": "08:00", "end_time": "10:00"},
                {"programa": "PAINEL DE CONTROLE", "apresentador": "Cristiano Ferreira", "start_time": "10:00", "end_time": "12:00"},
                {"programa": "SELEÇÃO BRASIL", "apresentador": "Cristiano Ferreira", "start_time": "12:00", "end_time": "13:00"},
                {"programa": "RADIO CONTROLE", "apresentador": "Gilson Silva", "start_time": "13:00", "end_time": "15:00"},
                {"programa": "PROGRAMA DU FARIA", "apresentador": "Flávio Faria", "start_time": "15:00", "end_time": "18:00"},
                {"programa": "PARADÃO SERTANEJO", "apresentador": "Viny Gomes", "start_time": "18:00", "end_time": "20:00"},
                {"programa": "SACOLEJO", "apresentador": "Zareta Jr", "start_time": "20:00", "end_time": "22:00"},
                {"programa": "ESTAÇÃO DEZ", "apresentador": "Zareta Jr", "start_time": "22:00", "end_time": "00:00"}
            ],
            "Quarta": [
                {"programa": "MANHÃ POSITIVA", "apresentador": "Viny Gomes", "start_time": "06:00", "end_time": "08:00"},
                {"programa": "ANGRA NA ONDA", "apresentador": "Marcus Megga", "start_time": "08:00", "end_time": "10:00"},
                {"programa": "PAINEL DE CONTROLE", "apresentador": "Cristiano Ferreira", "start_time": "10:00", "end_time": "12:00"},
                {"programa": "SELEÇÃO BRASIL", "apresentador": "Cristiano Ferreira", "start_time": "12:00", "end_time": "13:00"},
                {"programa": "RADIO CONTROLE", "apresentador": "Gilson Silva", "start_time": "13:00", "end_time": "15:00"},
                {"programa": "PROGRAMA DU FARIA", "apresentador": "Flávio Faria", "start_time": "15:00", "end_time": "18:00"},
                {"programa": "PARADÃO SERTANEJO", "apresentador": "Viny Gomes", "start_time": "18:00", "end_time": "20:00"},
                {"programa": "SACOLEJO", "apresentador": "Zareta Jr", "start_time": "20:00", "end_time": "22:00"},
                {"programa": "ESTAÇÃO DEZ", "apresentador": "Zareta Jr", "start_time": "22:00", "end_time": "00:00"}
            ],
            "Quinta": [
                {"programa": "MANHÃ POSITIVA", "apresentador": "Viny Gomes", "start_time": "06:00", "end_time": "08:00"},
                {"programa": "ANGRA NA ONDA", "apresentador": "Marcus Megga", "start_time": "08:00", "end_time": "10:00"},
                {"programa": "PAINEL DE CONTROLE", "apresentador": "Cristiano Ferreira", "start_time": "10:00", "end_time": "12:00"},
                {"programa": "SELEÇÃO BRASIL", "apresentador": "Cristiano Ferreira", "start_time": "12:00", "end_time": "13:00"},
                {"programa": "RADIO CONTROLE", "apresentador": "Gilson Silva", "start_time": "13:00", "end_time": "15:00"},
                {"programa": "PROGRAMA DU FARIA", "apresentador": "Flávio Faria", "start_time": "15:00", "end_time": "18:00"},
                {"programa": "PARADÃO SERTANEJO", "apresentador": "Viny Gomes", "start_time": "18:00", "end_time": "20:00"},
                {"programa": "SACOLEJO", "apresentador": "Zareta Jr", "start_time": "20:00", "end_time": "22:00"},
                {"programa": "ESTAÇÃO DEZ", "apresentador": "Zareta Jr", "start_time": "22:00", "end_time": "00:00"}
            ],
            "Sexta": [
                {"programa": "MANHÃ POSITIVA", "apresentador": "Viny Gomes", "start_time": "06:00", "end_time": "08:00"},
                {"programa": "ANGRA NA ONDA", "apresentador": "Marcus Megga", "start_time": "08:00", "end_time": "10:00"},
                {"programa": "PAINEL DE CONTROLE", "apresentador": "Cristiano Ferreira", "start_time": "10:00", "end_time": "12:00"},
                {"programa": "SELEÇÃO BRASIL", "apresentador": "Cristiano Ferreira", "start_time": "12:00", "end_time": "13:00"},
                {"programa": "RADIO CONTROLE", "apresentador": "Gilson Silva", "start_time": "13:00", "end_time": "15:00"},
                {"programa": "PROGRAMA DU FARIA", "apresentador": "Flávio Faria", "start_time": "15:00", "end_time": "18:00"},
                {"programa": "PARADÃO SERTANEJO", "apresentador": "Viny Gomes", "start_time": "18:00", "end_time": "20:00"},
                {"programa": "VERSÕES AO VIVO", "apresentador": "Zareta", "start_time": "20:00", "end_time": "22:00"}
            ],
            "Sábado": [
                {"programa": "Sertão na Cidade", "apresentador": "Aderbal Teixeira", "start_time": "05:30", "end_time": "08:00"},
                {"programa": "ESPECIAL ROBERTO CARLOS", "apresentador": "Viny Gomes", "start_time": "08:00", "end_time": "09:00"},
                {"programa": "SABADÃO SHOW", "apresentador": "Marco Aurélio", "start_time": "09:00", "end_time": "12:00"},
                {"programa": "PAINEL DE CONTROLE", "apresentador": "Zareta", "start_time": "10:00", "end_time": "12:00"},
                {"programa": "PROGRAMAÇÃO NORMAL", "apresentador": "Zareta", "start_time": "12:00", "end_time": "14:00"},
                {"programa": "TARDE TOTAL", "apresentador": "Zareta", "start_time": "14:00", "end_time": "16:00"},
                {"programa": "ENERGIA POSITIVA", "apresentador": "Zareta", "start_time": "16:00", "end_time": "18:00"},
                {"programa": "VERSÕES AO VIVO", "apresentador": "Zareta", "start_time": "18:00", "end_time": "20:00"},
                {"programa": "FOLIA POSITIVA", "apresentador": "Zareta", "start_time": "20:00", "end_time": "22:00"}
            ],
            "Domingo": [
                {"programa": "SELEÇÃO BRASIL", "apresentador": "ZARETA", "start_time": "06:00", "end_time": "08:00"},
                {"programa": "CLUBE DO CHORO POSITIVA", "apresentador": "ZARETA", "start_time": "08:00", "end_time": "09:00"},
                {"programa": "SACOLEJO", "apresentador": "ZARETA", "start_time": "09:00", "end_time": "13:00"},
                {"programa": "BATIDÃO", "apresentador": "Zareta", "start_time": "13:00", "end_time": "15:00"},
                {"programa": "PARADÃO SERTANEJO", "apresentador": "Zareta", "start_time": "15:00", "end_time": "17:00"},
                {"programa": "ROCK OVERDRIVE", "apresentador": "Zareta Jr", "start_time": "17:00", "end_time": "19:00"},
                {"programa": "CLUBE DO CHORO POSITIVA", "apresentador": "Zareta", "start_time": "19:00", "end_time": "21:00"},
                {"programa": "PROGRAMAÇÃO NORMAL", "apresentador": "Zareta", "start_time": "21:00", "end_time": "23:55"}
            ]
        };

        function togglePlayPause() {
            if (audioPlayer.paused) {
                audioPlayer.play().catch(error => {
                    console.error("Error playing audio:", error);
                    alert("Não foi possível reproduzir o áudio. Por favor, tente novamente.");
                });
                playPauseButton.textContent = '⏸';
                playPauseButton.setAttribute('aria-label', 'Pausar');
            } else {
                audioPlayer.pause();
                playPauseButton.textContent = '▶';
                playPauseButton.setAttribute('aria-label', 'Reproduzir');
            }
        }

        function toggleMute() {
            audioPlayer.muted = !audioPlayer.muted;
            muteButton.textContent = audioPlayer.muted ? '🔇' : '🔊';
            muteButton.setAttribute('aria-label', audioPlayer.muted ? 'Desmutar' : 'Mutar');
        }

        function updateVolume() {
            audioPlayer.volume = volumeControl.value;
        }

        function updateDateTime() {
            const now = new Date();
            dateElement.textContent = now.toLocaleDateString('pt-BR', {
                weekday: 'long',
                day: '2-digit',
                month: '2-digit',
                year: 'numeric'
            });
            timeElement.textContent = now.toLocaleTimeString('pt-BR', {
                hour: '2-digit',
                minute: '2-digit'
            });
            updateCurrentProgram(now);
        }

        function updateCurrentProgram(now) {
            const dayOfWeek = ['Domingo', 'Segunda', 'Terça', 'Quarta', 'Quinta', 'Sexta', 'Sábado'][now.getDay()];
            const currentTime = now.getHours() * 60 + now.getMinutes();
            const todaySchedule = schedule[dayOfWeek];

            let currentProgram = null;
            for (const program of todaySchedule) {
                const [startHour, startMinute] = program.start_time.split(':').map(Number);
                const [endHour, endMinute] = program.end_time.split(':').map(Number);
                const startTime = startHour * 60 + startMinute;
                const endTime = endHour * 60 + endMinute;

                if (currentTime >= startTime && currentTime < endTime) {
                    currentProgram = program;
                    break;
                }
            }

            if (currentProgram) {
                currentProgramElement.innerHTML = `
                    <h3>${currentProgram.programa}</h3>
                    <p>${currentProgram.apresentador}</p>
                    <p>${currentProgram.start_time} - ${currentProgram.end_time}</p>
                `;
            } else {
                currentProgramElement.textContent = 'Programação Normal';
            }
        }

        async function fetchWeather() {
            try {
                const response = await fetch(
                    `https://api.openweathermap.org/data/2.5/forecast?id=${CITY_ID}&appid=${API_KEY}&units=metric&lang=pt_br`
                );
                const data = await response.json();
                
                // Update current weather
                const currentWeather = data.list[0];
                const icon = getWeatherIcon(currentWeather.weather[0].icon);
                const temperature = Math.round(currentWeather.main.temp);
                const description = currentWeather.weather[0].description;

                weatherIcon.textContent = icon;
                temperatureElement.textContent = `${temperature}°C`;
                descriptionElement.textContent = description;

                // Update weather popup with weekly forecast
                const weeklyForecast = data.list.filter((item, index) => index % 8 === 0);
                let forecastHTML = '<div class="weekly-forecast">';
                
                weeklyForecast.forEach((day, index) => {
                    const date = new Date(day.dt * 1000);
                    const dayName = date.toLocaleDateString('pt-BR', { weekday: 'short' });
                    const icon = getWeatherIcon(day.weather[0].icon);
                    const temp = Math.round(day.main.temp);
                    
                    forecastHTML += `
                        <div class="forecast-day">
                            <div class="day">${index === 0 ? 'Hoje' : dayName}</div>
                            <div class="weather-icon">${icon}</div>
                            <div class="temperature">${temp}°C</div>
                        </div>
                    `;
                });
                
                forecastHTML += '</div>';
                weatherPopupContent.innerHTML = forecastHTML;
            } catch (error) {
                console.error('Error fetching weather data:', error);
            }
        }

        function getWeatherIcon(icon) {
            const iconMap = {
                '01': '☀️',
                '02': '⛅',
                '03': '☁️',
                '04': '☁️',
                '09': '🌧️',
                '10': '🌦️',
                '11': '⛈️',
                '13': '❄️',
                '50': '🌫️'
            };
            return iconMap[icon.slice(0, -1)] || '☁️';
        }

        function showSchedule() {
            let scheduleHTML = '<table class="schedule-table">';
            for (const [day, programs] of Object.entries(schedule)) {
                scheduleHTML += `<tr><th colspan="3">${day}</th></tr>`;
                for (const program of programs) {
                    scheduleHTML += `
                        <tr>
                            <td>${program.start_time} - ${program.end_time}</td>
                            <td>${program.programa}</td>
                            <td>${program.apresentador}</td>
                        </tr>
                    `;
                }
            }
            scheduleHTML += '</table>';
            scheduleContent.innerHTML = scheduleHTML;
            schedulePopup.style.display = 'flex';
        }

        function closePopup(popup) {
            popup.style.display = 'none';
        }

        // Carousel functionality
        const carousel = document.querySelector('.carousel-inner');
        const prevButton = document.querySelector('.carousel-control.prev');
        const nextButton = document.querySelector('.carousel-control.next');
        let currentSlide = 0;

        function showSlide(index) {
            carousel.style.transform = `translateX(-${index * 100}%)`;
        }

        function nextSlide() {
            currentSlide = (currentSlide + 1) % 6;
            showSlide(currentSlide);
        }

        function prevSlide() {
            currentSlide = (currentSlide - 1 + 6) % 7;
            showSlide(currentSlide);
        }

        // Event listeners
        playPauseButton.addEventListener('click', togglePlayPause);
        muteButton.addEventListener('click', toggleMute);
        volumeControl.addEventListener('input', updateVolume);
        scheduleButton.addEventListener('click', showSchedule);
        weatherWidget.addEventListener('click', () => weatherPopup.style.display = 'flex');
        closeButtons.forEach(button => {
            button.addEventListener('click', () => {
                closePopup(schedulePopup);
                closePopup(weatherPopup);
            });
        });
        prevButton.addEventListener('click', prevSlide);
        nextButton.addEventListener('click', nextSlide);

        // Close popups when clicking outside
        window.addEventListener('click', (event) => {
            if (event.target === schedulePopup) {
                closePopup(schedulePopup);
            }
            if (event.target === weatherPopup) {
                closePopup(weatherPopup);
            }
        });

        // Prevent closing when clicking inside the popup content
        document.querySelectorAll('.popup-content').forEach(content => {
            content.addEventListener('click', (event) => {
                event.stopPropagation();
            });
        });

        // Initialize
        updateDateTime();
        setInterval(updateDateTime, 1000); // Update time every second
        fetchWeather();
        setInterval(fetchWeather, 400000); // Update weather every 10 minutes
        setInterval(nextSlide, 3000); // Auto-advance carousel every 5 seconds
        
    </script>
    
<div id="sfc89uj22kzxder9b6swhl9sjw7cy1zzxdx"></div><script type="text/javascript" src="https://counter6.optistats.ovh/private/counter.js?c=89uj22kzxder9b6swhl9sjw7cy1zzxdx&down=async" async></script><br><a href="https://www.freecounterstat.com"></a><noscript><a href="https://www.freecounterstat.com"><img src="https://counter6.optistats.ovh/private/freecounterstat.php?c=89uj22kzxder9b6swhl9sjw7cy1zzxdx" border="0" title="website counters" alt="website counters"></a></noscript>
</div>
</body>

</html>
